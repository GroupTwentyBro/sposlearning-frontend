<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SPOŠLearning</title>

    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link id="theme-link" href="/style/variables-light.css" rel="stylesheet">
    <link href="style/base.css" rel="stylesheet">
    <link href="style/components.css" rel="stylesheet">
    <link href="style/search.css" rel="stylesheet">
    <link href="style/custom-el.css" rel="stylesheet">
    <link href="style/mobile.css" rel="stylesheet">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <!-- Button bar at the bottom of viewport -->
    <div class="control-bar">
        <div class="user-controls">
            <a href="/" class="btn btn-sm btn-primary">Domů</a>
            <a href="/feedback.html" class="btn btn-sm btn-primary">Zpětná vazba</a>
        </div>
        <div id="admin-bar"></div>
    </div>

    <!-- Main Page Content -->
    <div class="content mainpage" id="main-content">
        <!-- Search bar -->
        <div class="navbar">
            <div class="search">
                <icon>search</icon>
                <input id="search-input" placeholder="Načítání stránek..." type="text" disabled>
            </div>
        </div>

        <!-- Developer Disclamer, unused -->
        <!--
        <div class="dev-disclamer" id="disclamer-dev">
            <div class="dev-message">
                <icon>
                    warning
                </icon>
                <p>
                    SPOŠLearning je momentálně ve vývoji, i když už je ve funkční fázi. Kvůli tomu ale nezaručujeme plnou funkčnost, ani kompletní obsah. Jakmile bude SPOŠLearning hotový do plně funkční fáze, budeme vás informovat na Discordu.
                </p>
            </div>
            <p class="ver-tag">SPOŠLearning verze beta 0.3</p>
        </div>
        -->

        <!-- Searching for contributors disclamer -->
        <div class="info-disclamer" id="disclamer-info">
            <div class="info-message">
                <icon class = "boxed clr3">
                    info
                </icon>
                <p>
                    Hledáme kontributory na SPOŠLearning. Pokud chcete dělat články na SPOŠLearning a mít za to nějaké výhody, pište na e-mail <a href="mailto:tadeasnosek@sposlearning.cz">tadeasnosek@sposlearning.cz</a>.
                </p>
            </div>
        </div>

        <!-- Welcome info -->
        <div id="welcome-message">
            <h1>Vítej na SPOŠLearningu!</h1>
            <p>
                SPOŠLearning je platforma která ukládá všechny zápisy a procvičování na jedno místo.
                Hledáš zápisky z češtiny? Jsou tu. Vysvětlení <code>&lt;h1&gt;</code> HTML tagu? Máme to.
                Řešení úkolů z programování? Samozřejmě že tu jsou. Jednoduše řečeno, je tu všechno co se učíme.
            </p>
            <div class="box-row">
                <div class="box">
                    <div class="col">
                        <icon class="boxed clr1">manage_search</icon>
                        <h2 class="boxed">Proč používat SPOŠLearning?</h2>
                        <div class="text boxed">Důvod proč jsme udělali SPOŠLearning je ten že
                            na Discordu bylo všechno dost nepřehledné. Většina zápisů byla v pohodě,
                            ale některé byly diskutabilní. Na SPOŠLearningu se snažíme vše dělat přehledně a kvalitně.</div>
                    </div>
                </div>
                <div class="box">
                    <div class="col">
                        <icon class="boxed clr3">add_notes</icon>
                        <h2 class="boxed">Můžu přidávat i já?</h2>
                        <div class="text boxed">Do budoucna bychom chtěli udělat systém,
                            kde každý bude moci přidávat cokoliv, ale administrátoři to pak
                            budou muset schválit. Momentálně to funguje tak,
                            že pokud chcete přidávat, ozvěte na email uvedený v kartě výše.</div>
                    </div>
                </div>
            </div>
        </div>

        <button id="theme-toggle" class="btn btn-icon">
            <div class="icon-stack">
                <icon class="icon-moon">dark_mode</icon>

                <icon class="icon-sun">light_mode</icon>
            </div>
        </button>

        <!-- Search results, hidden by default -->
        <div id="search-results" style="display: none;"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script src="/js/firebaseConfig.js" type="module"></script>
    <script src="/js/search.js" type="module"></script>
    <script>
        const btn = document.getElementById("theme-toggle");
        const themeLink = document.getElementById("theme-link");

        // 1. Check local storage on load
        const currentTheme = localStorage.getItem("theme");

        // Function to apply the visual state of the button
        function updateButtonState(theme) {
            if (theme === "dark") {
                btn.classList.add("is-dark"); // This triggers the CSS fade
            } else {
                btn.classList.remove("is-dark");
            }
        }

        // Initial setup
        if (currentTheme === "dark") {
            themeLink.href = "/style/variables-dark.css";
            updateButtonState("dark");
        }

        // 2. Button Click Event
        btn.addEventListener("click", function() {

            // Toggle Logic
            if (themeLink.href.includes("variables-light.css")) {
                // Switch to Dark
                themeLink.href = "/style/variables-dark.css";
                localStorage.setItem("theme", "dark");
                updateButtonState("dark");
            } else {
                // Switch to Light
                themeLink.href = "/style/variables-light.css";
                localStorage.setItem("theme", "light");
                updateButtonState("light");
            }
        });
    </script>
    <script>
        // Run this immediately to prevent flash of wrong theme
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
            document.getElementById("theme-link").href = "/style/variables-dark.css";
        }
    </script>
    <script src="/js/main.js"></script>
</body>
</html>